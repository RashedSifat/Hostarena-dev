{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/react/hostarena-dev/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/User/react/hostarena-dev/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/User/react/hostarena-dev/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/User/react/hostarena-dev/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/User/react/hostarena-dev/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/User/react/hostarena-dev/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{PureComponent}from\"react\";import{loadStripe}from\"@stripe/stripe-js\";import{server}from\"../env\";import axios from\"axios\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var StripeCheckout=/*#__PURE__*/function(_PureComponent){_inherits(StripeCheckout,_PureComponent);var _super=_createSuper(StripeCheckout);function StripeCheckout(){var _this;_classCallCheck(this,StripeCheckout);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={creds:[],sid:_this.props.match.params.sid};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var stripe_creds,stripePromise,stripe;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:localStorage.setItem(\"sid\",_this.state.sid);_context.next=3;return axios.get(server+\"/v1/payment_method/read-public\").then(function(rsp){_this.setState({payment_methods:rsp.data.payload.payment_methods,creds:rsp.data.payload.payment_creds});}).catch(function(err){});case 3:stripe_creds=_this.state.creds.filter(function(data){return data.key===\"STRIPE_PUBLIC_KEY\";})[0];stripePromise=loadStripe(stripe_creds.value);_context.next=7;return stripePromise;case 7:stripe=_context.sent;_context.next=10;return stripe.redirectToCheckout({sessionId:_this.state.sid});case 10:case\"end\":return _context.stop();}}},_callee);}));return _this;}_createClass(StripeCheckout,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(_Fragment,{});}}]);return StripeCheckout;}(PureComponent);export default StripeCheckout;","map":{"version":3,"names":["React","PureComponent","loadStripe","server","axios","StripeCheckout","state","creds","sid","props","match","params","componentDidMount","localStorage","setItem","get","then","rsp","setState","payment_methods","data","payload","payment_creds","catch","err","stripe_creds","filter","key","stripePromise","value","stripe","redirectToCheckout","sessionId"],"sources":["C:/Users/User/react/hostarena-dev/src/controllers/stripe.jsx"],"sourcesContent":["import React, { PureComponent } from \"react\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { server } from \"../env\";\nimport axios from \"axios\";\n\nclass StripeCheckout extends PureComponent {\n  state = {\n    creds: [],\n    sid: this.props.match.params.sid,\n  };\n  componentDidMount = async () => {\n    localStorage.setItem(\"sid\", this.state.sid);\n    await axios\n      .get(server + \"/v1/payment_method/read-public\")\n      .then((rsp) => {\n        this.setState({\n          payment_methods: rsp.data.payload.payment_methods,\n          creds: rsp.data.payload.payment_creds,\n        });\n      })\n      .catch((err) => {});\n\n    var stripe_creds = this.state.creds.filter(\n      (data) => data.key === \"STRIPE_PUBLIC_KEY\"\n    )[0];\n\n    const stripePromise = loadStripe(stripe_creds.value);\n    const stripe = await stripePromise;\n    await stripe.redirectToCheckout({\n      sessionId: this.state.sid,\n    });\n  };\n  render() {\n    return <></>;\n  }\n}\n\nexport default StripeCheckout;\n"],"mappings":"0sBAAA,MAAOA,MAAP,EAAgBC,aAAhB,KAAqC,OAArC,CACA,OAASC,UAAT,KAA2B,mBAA3B,CACA,OAASC,MAAT,KAAuB,QAAvB,CACA,MAAOC,MAAP,KAAkB,OAAlB,C,mGAEMC,e,mWACJC,K,CAAQ,CACNC,KAAK,CAAE,EADD,CAENC,GAAG,CAAE,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBH,GAFvB,C,OAIRI,iB,wEAAoB,2KAClBC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAA4B,MAAKR,KAAL,CAAWE,GAAvC,EADkB,sBAEZJ,MAAK,CACRW,GADG,CACCZ,MAAM,CAAG,gCADV,EAEHa,IAFG,CAEE,SAACC,GAAD,CAAS,CACb,MAAKC,QAAL,CAAc,CACZC,eAAe,CAAEF,GAAG,CAACG,IAAJ,CAASC,OAAT,CAAiBF,eADtB,CAEZZ,KAAK,CAAEU,GAAG,CAACG,IAAJ,CAASC,OAAT,CAAiBC,aAFZ,CAAd,EAID,CAPG,EAQHC,KARG,CAQG,SAACC,GAAD,CAAS,CAAE,CARd,CAFY,QAYdC,YAZc,CAYC,MAAKnB,KAAL,CAAWC,KAAX,CAAiBmB,MAAjB,CACjB,SAACN,IAAD,QAAUA,KAAI,CAACO,GAAL,GAAa,mBAAvB,EADiB,EAEjB,CAFiB,CAZD,CAgBZC,aAhBY,CAgBI1B,UAAU,CAACuB,YAAY,CAACI,KAAd,CAhBd,uBAiBGD,cAjBH,QAiBZE,MAjBY,sCAkBZA,OAAM,CAACC,kBAAP,CAA0B,CAC9BC,SAAS,CAAE,MAAK1B,KAAL,CAAWE,GADQ,CAA1B,CAlBY,wD,kEAsBpB,iBAAS,CACP,mBAAO,kBAAP,CACD,C,4BA7B0BP,a,EAgC7B,cAAeI,eAAf"},"metadata":{},"sourceType":"module"}