{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/react/hostarena-dev/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/User/react/hostarena-dev/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/User/react/hostarena-dev/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/User/react/hostarena-dev/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/User/react/hostarena-dev/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/User/react/hostarena-dev/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{PureComponent}from\"react\";import axios from\"axios\";import{server}from\"../env\";import{loadStripe}from\"@stripe/stripe-js\";import Loader from\"../components/Loader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Checkout=/*#__PURE__*/function(_PureComponent){_inherits(Checkout,_PureComponent);var _super=_createSuper(Checkout);function Checkout(){var _this;_classCallCheck(this,Checkout);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={id:_this.props.match.params.id,isLoaded:true,message:\"\",payment_methods:[],creds:{},checkout:{}};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(server+\"/v1/payment_method/read-public\").then(function(rsp){_this.setState({payment_methods:rsp.data.payload.payment_methods,creds:rsp.data.payload.payment_creds});}).catch(function(err){});case 2:_context.next=4;return axios.get(server+\"/v1/checkout/read/\"+_this.state.id).then(function(rsp){_this.setState({checkout:rsp.data.payload.order});}).catch(function(err){});case 4:case\"end\":return _context.stop();}}},_callee);}));_this.paypal=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var params;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({isLoaded:false});params={checkout_id:_this.state.id};_context2.next=4;return axios.post(server+\"/v1/checkout/checkout-paypal\",params).then(function(rsp){window.location.href=rsp.data.payload.url;}).catch(function(err){});case 4:_this.setState({isLoaded:true});case 5:case\"end\":return _context2.stop();}}},_callee2);}));_this.stripe=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var params;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this.setState({isLoaded:false});params={checkout_id:_this.state.id};_context4.next=4;return axios.post(server+\"/v1/checkout/checkout-stripe\",params).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(rsp){var stripe_creds,stripePromise,stripe;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:stripe_creds=_this.state.creds.filter(function(data){return data.key===\"STRIPE_PUBLIC_KEY\";})[0];stripePromise=loadStripe(stripe_creds.value);_context3.next=4;return stripePromise;case 4:stripe=_context3.sent;_context3.next=7;return stripe.redirectToCheckout({sessionId:rsp.data.payload.url});case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x){return _ref4.apply(this,arguments);};}()).catch(function(err){});case 4:_this.setState({isLoaded:true});case 5:case\"end\":return _context4.stop();}}},_callee4);}));return _this;}_createClass(Checkout,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,payment_methods=_this$state.payment_methods,checkout=_this$state.checkout,isLoaded=_this$state.isLoaded;return/*#__PURE__*/_jsx(\"div\",{id:\"order\",style:{marginTop:\"8rem\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center my-5\",children:isLoaded?/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8 col-md-offset-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"brand\",children:\"Checkout\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"total\",style:{textAlign:\"right\"},children:[\"$\",checkout.amount,/*#__PURE__*/_jsx(\"span\",{children:\"USD\"})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"select-payment\",children:\"Select one of the available payment methods.\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:payment_methods.map(function(pm,index){return pm.code===\"paypal\"?/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",id:\"paypal\",onClick:_this2.paypal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-container\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/paypal.png\",className:\"payment-option\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Paypal Express\"})]})})}):pm.code===\"stripe\"?/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",id:\"paypal\",onClick:_this2.stripe,children:/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-container\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/stripe.png\",className:\"payment-option\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Credit/Debit Card\"})]})})}):\"\";})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"txt\",children:\"Please Read all the Terms and Conditions before proceeding.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"txt\",children:\"\\xA9 2021. All Rights Reserved.\"})]})]})}):/*#__PURE__*/_jsx(Loader,{className:\"spinner-border-lg\"})})})});}}]);return Checkout;}(PureComponent);export default Checkout;","map":{"version":3,"names":["React","PureComponent","axios","server","loadStripe","Loader","Checkout","state","id","props","match","params","isLoaded","message","payment_methods","creds","checkout","componentDidMount","get","then","rsp","setState","data","payload","payment_creds","catch","err","order","paypal","checkout_id","post","window","location","href","url","stripe","stripe_creds","filter","key","stripePromise","value","redirectToCheckout","sessionId","marginTop","textAlign","amount","map","pm","index","code"],"sources":["C:/Users/User/react/hostarena-dev/src/source/checkout.jsx"],"sourcesContent":["import React, { PureComponent } from \"react\";\nimport axios from \"axios\";\nimport { server } from \"../env\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport Loader from \"../components/Loader\";\n\nclass Checkout extends PureComponent {\n  state = {\n    id: this.props.match.params.id,\n    isLoaded: true,\n    message: \"\",\n    payment_methods: [],\n    creds: {},\n    checkout: {},\n  };\n\n  componentDidMount = async () => {\n    await axios\n      .get(server + \"/v1/payment_method/read-public\")\n      .then((rsp) => {\n        this.setState({\n          payment_methods: rsp.data.payload.payment_methods,\n          creds: rsp.data.payload.payment_creds,\n        });\n      })\n      .catch((err) => {});\n\n    await axios\n      .get(server + \"/v1/checkout/read/\" + this.state.id)\n      .then((rsp) => {\n        this.setState({\n          checkout: rsp.data.payload.order,\n        });\n      })\n      .catch((err) => {});\n  };\n\n  paypal = async () => {\n    this.setState({\n      isLoaded: false,\n    });\n    const params = {\n      checkout_id: this.state.id,\n    };\n    await axios\n      .post(server + \"/v1/checkout/checkout-paypal\", params)\n      .then((rsp) => {\n        window.location.href = rsp.data.payload.url;\n      })\n      .catch((err) => {});\n    this.setState({\n      isLoaded: true,\n    });\n  };\n\n  stripe = async () => {\n    this.setState({\n      isLoaded: false,\n    });\n    const params = {\n      checkout_id: this.state.id,\n    };\n    await axios\n      .post(server + \"/v1/checkout/checkout-stripe\", params)\n      .then(async (rsp) => {\n        var stripe_creds = this.state.creds.filter(\n          (data) => data.key === \"STRIPE_PUBLIC_KEY\"\n        )[0];\n\n        const stripePromise = loadStripe(stripe_creds.value);\n        const stripe = await stripePromise;\n        await stripe.redirectToCheckout({\n          sessionId: rsp.data.payload.url,\n        });\n      })\n      .catch((err) => {});\n    this.setState({\n      isLoaded: true,\n    });\n  };\n\n  render() {\n    const { payment_methods, checkout, isLoaded } = this.state;\n    return (\n      <div id=\"order\" style={{ marginTop: \"8rem\" }}>\n        <div className=\"container\">\n          <div className=\"row justify-content-center my-5\">\n            {isLoaded ? (\n              <div className=\"col-md-8 col-md-offset-2\">\n                <div className=\"card\">\n                  <div className=\"header\">\n                    <div className=\"row\">\n                      <div className=\"col-md-6\">\n                        <div className=\"brand\">Checkout</div>\n                      </div>\n                      <div className=\"col-md-6\">\n                        <div className=\"total\" style={{ textAlign: \"right\" }}>\n                          ${checkout.amount}\n                          <span>USD</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"body\">\n                    <div className=\"select-payment\">\n                      Select one of the available payment methods.\n                    </div>\n                    <br />\n                    <div className=\"row\">\n                      {payment_methods.map((pm, index) =>\n                        pm.code === \"paypal\" ? (\n                          <div className=\"col-md-3\">\n                            <a href=\"#\" id=\"paypal\" onClick={this.paypal}>\n                              <div className=\"box\">\n                                <div className=\"logo-container\">\n                                  <img\n                                    src=\"/images/paypal.png\"\n                                    className=\"payment-option\"\n                                  />\n                                </div>\n                                <div className=\"title\">Paypal Express</div>\n                              </div>\n                            </a>\n                          </div>\n                        ) : pm.code === \"stripe\" ? (\n                          <div className=\"col-md-3\">\n                            <a href=\"#\" id=\"paypal\" onClick={this.stripe}>\n                              <div className=\"box\">\n                                <div className=\"logo-container\">\n                                  <img\n                                    src=\"/images/stripe.png\"\n                                    className=\"payment-option\"\n                                  />\n                                </div>\n                                <div className=\"title\">Credit/Debit Card</div>\n                              </div>\n                            </a>\n                          </div>\n                        ) : (\n                          \"\"\n                        )\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"footer\">\n                    <div className=\"txt\">\n                      Please Read all the Terms and Conditions before\n                      proceeding.\n                    </div>\n                    <div className=\"txt\">&copy; 2021. All Rights Reserved.</div>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <Loader className=\"spinner-border-lg\" />\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Checkout;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}